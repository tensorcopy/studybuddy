<script>
(function() {
  var loaded = false;
  function loadMathJax() {
    if (loaded) return;
    loaded = true;
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    };
    var script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js';
    script.async = true;
    document.head.appendChild(script);
  }
  if ('requestIdleCallback' in window) {
    requestIdleCallback(loadMathJax, { timeout: 3000 });
  } else {
    setTimeout(loadMathJax, 2000);
  }
})();
</script>
